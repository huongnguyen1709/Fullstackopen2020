(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(1),a=t.n(c),r=t(16),i=t.n(r),u=t(17),s=t(3),l=function(e){var n=e.filterName,t=e.onHandleChange;return Object(o.jsxs)("div",{style:{marginBottom:"20px"},children:["filter shown with: ",Object(o.jsx)("input",{type:"text",value:n,onChange:t})]})},d=t(5),j=t.n(d),b="/api/persons",f=function(){return j.a.get(b)},h=function(e){var n=e.error,t=e.message;return null===t?null:Object(o.jsx)("div",{className:n?"error message":"success message",children:t})},m=function(e){var n=e.onHandleSubmit,t=e.newName,c=e.newNumber,a=e.onChangeName,r=e.onChangeNumber;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{style:{marginBottom:"20px"},children:["name: ",Object(o.jsx)("input",{type:"text",value:t,onChange:a})]}),Object(o.jsxs)("div",{style:{marginBottom:"20px"},children:["number: ",Object(o.jsx)("input",{type:"tel",value:c,onChange:r})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.persons;return n&&n.map((function(n){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{style:{display:"inline-block"},children:[n.name," \xa0 ",n.number," "]})," \xa0",Object(o.jsx)("button",{onClick:function(){return e.onDelete(n.id,n.name)},children:"delete"})]},n.id)}))},p=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),d=i[0],p=i[1],x=Object(c.useState)(""),g=Object(s.a)(x,2),v=g[0],w=g[1],C=Object(c.useState)(""),y=Object(s.a)(C,2),N=y[0],S=y[1],k=Object(c.useState)(null),L=Object(s.a)(k,2),B=L[0],D=L[1],H=Object(c.useState)(!1),T=Object(s.a)(H,2),A=T[0],E=T[1];Object(c.useEffect)((function(){f().then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[]);var I=function(e,n){(function(e,n){return j.a.put("".concat(b,"/").concat(e),n)})(e,n).then((function(e){f().then((function(e){a(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e),console.log(e.response.data.error),E(!0),D(e.response.data.error),setTimeout((function(){D(null),E(!1)}),5e3)})),p(""),w("")};return N&&""!==N&&(t=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(N.toLowerCase())}))),Object(o.jsxs)("div",{style:{marginLeft:"10px",fontSize:"20px"},children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(h,{error:A,message:B}),Object(o.jsx)(l,{filterName:N,onHandleChange:function(e){return S(e.target.value)}}),Object(o.jsx)("h3",{children:"Add a new"}),Object(o.jsx)(m,{onHandleSubmit:function(e){e.preventDefault();var n,o=t.every((function(e){return e.name.toLowerCase()!==d.toLowerCase()})),c={name:d,number:v};if(o)(n=c,j.a.post(b,n)).then((function(e){a([].concat(Object(u.a)(t),[e.data])),p(""),w(""),D("Added ".concat(d)),setTimeout((function(){D(null)}),5e3)})).catch((function(e){E(!0),D(e.response.data.error),setTimeout((function(){D(null),E(!1)}),5e3)}));else{var r=t.findIndex((function(e){return e.name.toLowerCase()===d})),i=t[r].id,s=t[r].name;window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one ?"))&&I(i,c)}},newName:d,newNumber:v,onChangeName:function(e){return p(e.target.value)},onChangeNumber:function(e){return w(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(O,{onDelete:function(e,n){window.confirm("Delete ".concat(n," ?"))&&function(e){return j.a.delete("".concat(b,"/").concat(e))}(e).then((function(e){f().then((function(e){a(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},persons:t})]})};t(40);i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(p,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.5c096493.chunk.js.map